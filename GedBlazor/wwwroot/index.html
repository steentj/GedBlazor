<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GedBlazor</title>
    <base href="/" />
    <script>
        // Ensure correct base both locally (/) and when hosted under /ged
        (function () {
            var base = document.querySelector('base');
            var path = window.location.pathname || '/';
            var desiredBase = (path === '/ged' || path.startsWith('/ged/')) ? '/ged/' : '/';
            if (base && base.getAttribute('href') !== desiredBase) {
                base.setAttribute('href', desiredBase);
            }
        })();
    </script>
    <!-- Inline favicon to avoid /favicon.ico 404 -->
    <link rel="icon" href="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7">
    <!-- Use Bootstrap from CDN to avoid missing local file -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous" />
    <!-- Add app.css with correct path -->
    <link href="app.css" rel="stylesheet" />
    <link rel="stylesheet" href="_content/Radzen.Blazor/css/material-base.css">
</head>
<body>
    <div id="app">Loading...</div>

    <script src="_framework/blazor.webassembly.js"></script>
    <script>
        // Function to download a file from a base64 string
        window.downloadFileFromBase64 = function (fileName, base64String) {
            // Determine MIME type for Word documents or other file types
            const mimeType = fileName.endsWith('.docx')
                ? 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
                : 'application/octet-stream';
                
            // Create a link element
            const link = document.createElement('a');
            // Set the href attribute to a data URI with the base64 content
            link.href = `data:${mimeType};base64,${base64String}`;
            // Set the download attribute with the file name
            link.download = fileName;
            // Hide the link
            link.style.display = 'none';
            // Add the link to the document
            document.body.appendChild(link);
            // Click the link programmatically to start the download
            link.click();
            // Remove the link from the document
            document.body.removeChild(link);
        }
    </script>
    <script src="_content/Radzen.Blazor/Radzen.Blazor.js"></script>
</body>
</html>